fragment DepositFields on Deposit {
  id
  status
  amount
  asset {
    ...AssetFields
  }
  createdTimestamp
  creditedTimestamp
  txHash
  party {
    id
  }
}

query Deposits($partyId: ID!, $pagination: Pagination, $dateRange: DateRange) {
  party(id: $partyId) {
    id
    depositsConnection(pagination: $pagination, dateRange: $dateRange) {
      edges {
        node {
          ...DepositFields
        }
        cursor
      }
      pageInfo {
        hasNextPage
        hasPreviousPage
        startCursor
        endCursor
      }
    }
  }
}

subscription DepositEvent($partyId: ID!) {
  busEvents(partyId: $partyId, batchSize: 0, types: [Deposit]) {
    event {
      ... on Deposit {
        ...DepositFields
      }
    }
  }
}
