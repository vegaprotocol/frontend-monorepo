fragment ProposalEventFields on Proposal {
  id
  reference
  state
  rejectionReason
  errorDetails
}

subscription ProposalEvent($partyId: ID!) {
  proposals(partyId: $partyId) {
    ...ProposalEventFields
  }
}

fragment UpdateNetworkParameterFields on Proposal {
  id
  state
  datetime
  terms {
    enactmentDatetime
    change {
      ... on UpdateNetworkParameter {
        networkParameter {
          key
          value
        }
      }
    }
  }
}

subscription OnUpdateNetworkParameters {
  busEvents(types: [Proposal], batchSize: 0) {
    event {
      ... on Proposal {
        ...UpdateNetworkParameterFields
      }
    }
  }
}

query ProposalOfMarket($marketId: ID!) {
  proposal(id: $marketId) {
    id
    terms {
      enactmentDatetime
    }
  }
}
