fragment MarketDepthDataFields on MarketData {
  staticMidPrice
  marketTradingMode
  indicativeVolume
  indicativePrice
  bestStaticBidPrice
  bestStaticOfferPrice
  market {
    id
  }
}

query MarketDepth($marketId: ID!) {
  market(id: $marketId) {
    id
    decimalPlaces
    positionDecimalPlaces
    data {
      ...MarketDepthDataFields
    }
    depth {
      lastTrade {
        price
      }
      sell {
        price
        volume
        numberOfOrders
      }
      buy {
        price
        volume
        numberOfOrders
      }
      sequenceNumber
    }
  }
}

fragment MarketDepthUpdateFields on ObservableMarketDepthUpdate {
  marketId
  sell {
    price
    volume
    numberOfOrders
  }
  buy {
    price
    volume
    numberOfOrders
  }
  sequenceNumber
  previousSequenceNumber
}

subscription MarketDepthEvent($marketId: ID!) {
  marketsDepthUpdate(marketIds: [$marketId]) {
    ...MarketDepthUpdateFields
  }
}
