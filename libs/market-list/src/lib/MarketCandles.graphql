fragment MarketCandleFields on CandleNode {
  high
  low
  open
  close
  volume
}

fragment MarketCandleEventFields on Candle {
  high
  low
  open
  close
  volume
}

fragment MarketItemFields on Market {
  id
  candlesConnection(interval: $interval, since: $since) {
    edges {
      node {
        ...MarketCandleFields
      }
    }
  }
}

query MarketCandles($interval: Interval!, $since: String!, $marketId: ID!) {
  marketsConnection(id: $marketId) {
    edges {
      node {
        ...MarketItemFields
      }
    }
  }
}

query MarketsCandles($interval: Interval!, $since: String!) {
  marketsConnection {
    edges {
      node {
        ...MarketItemFields
      }
    }
  }
}

subscription MarketCandlesEvent($marketId: ID!, $interval: Interval!) {
  candles(interval: $interval, marketId: $marketId) {
    ...MarketCandleEventFields
  }
}
