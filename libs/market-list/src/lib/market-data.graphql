fragment MarketDataUpdateFields on ObservableMarketData {
  marketId
  bestBidPrice
  bestOfferPrice
  bestStaticBidPrice
  bestStaticOfferPrice
  indicativePrice
  indicativeVolume
  marketState
  marketTradingMode
  markPrice
  midPrice
  priceMonitoringBounds {
    maxValidPrice
    minValidPrice
    referencePrice
  }
  staticMidPrice
  suppliedStake
  targetStake
  trigger
}

subscription MarketDataUpdate($marketId: ID!) {
  marketsData(marketIds: [$marketId]) {
    ...MarketDataUpdateFields
  }
}

fragment MarketDataFields on MarketData {
  market {
    id
  }
  auctionEnd
  auctionStart
  bestBidPrice
  bestOfferPrice
  bestStaticBidPrice
  bestStaticOfferPrice
  indicativePrice
  indicativeVolume
  marketState
  marketTradingMode
  marketValueProxy
  markPrice
  midPrice
  priceMonitoringBounds {
    maxValidPrice
    minValidPrice
    referencePrice
  }
  staticMidPrice
  suppliedStake
  targetStake
  trigger
}

query MarketData($marketId: ID!) {
  marketsConnection(id: $marketId) {
    edges {
      node {
        data {
          ...MarketDataFields
        }
      }
    }
  }
}
