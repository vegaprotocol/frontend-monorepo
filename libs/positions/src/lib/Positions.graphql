fragment PositionFields on Position {
  realisedPNL
  openVolume
  unrealisedPNL
  averageEntryPrice
  updatedAt
  marginsConnection {
    edges {
      node {
        market {
          id
        }
        maintenanceLevel
        searchLevel
        initialLevel
        collateralReleaseLevel
        asset {
          symbol
        }
      }
    }
  }
  market {
    id
    decimalPlaces
    positionDecimalPlaces
    tradingMode
    tradableInstrument {
      instrument {
        name
      }
    }
    data {
      markPrice
      market {
        id
      }
    }
  }
}

query Positions($partyId: ID!) {
  party(id: $partyId) {
    id
    positionsConnection {
      edges {
        node {
          ...PositionFields
        }
      }
    }
  }
}

subscription PositionsSubscription($partyId: ID!) {
  positions(partyId: $partyId) {
    ...PositionFields
  }
}
