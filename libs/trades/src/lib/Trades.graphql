fragment TradeFields on Trade {
  id
  price
  size
  createdAt
  market {
    id
    decimalPlaces
    positionDecimalPlaces
  }
}

query Trades($marketId: ID!, $pagination: Pagination) {
  market(id: $marketId) {
    id
    tradesConnection(pagination: $pagination) {
      edges {
        node {
          ...TradeFields
        }
        cursor
      }
      pageInfo {
        startCursor
        endCursor
        hasNextPage
        hasPreviousPage
      }
    }
  }
}

subscription TradesSub($marketId: ID!) {
  trades(marketId: $marketId) {
    id
    marketId
    buyOrder
    sellOrder
    buyerId
    sellerId
    aggressor
    price
    size
    createdAt
    type
    buyerFee {
      makerFee
      infrastructureFee
      liquidityFee
    }
    sellerFee {
      makerFee
      infrastructureFee
      liquidityFee
    }
    buyerAuctionBatch
    sellerAuctionBatch
  }
}
